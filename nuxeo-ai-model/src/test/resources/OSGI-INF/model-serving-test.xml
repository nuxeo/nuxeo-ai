<?xml version="1.0"?>
<component name="org.nuxeo.ai.model.serving.ModelServing.test" version="1.0">

  <extension target="org.nuxeo.ecm.directory.GenericDirectory" point="directories">

    <directory name="template-directory" template="true">
      <createTablePolicy>on_missing_columns</createTablePolicy>
      <idField>id</idField>
    </directory>

    <directory name="template-vocabulary" template="true" extends="template-directory">
      <schema>vocabulary</schema>
      <idField>id</idField>
    </directory>

  </extension>

  <extension point="models" target="org.nuxeo.ai.model.serving.ModelServing">
    <model id="xyz">
      <filter primaryType="File"/>
      <config name="uri">http://localhost:5089/v1/models/super_testing/</config>
      <config name="transientStore">testTransient</config>
      <config name="liveness.uri">http://localhost:5089/health</config>
      <config name="liveness.methodName">GET</config>
      <inputProperties>
        <property name="dc:title" type="txt"/>
        <property name="ecm:path" type="txt"/>
        <property name="ecm:mixinType" type="txt"/>
      </inputProperties>
      <outputProperties>
        <property name="dc:description" type="txt"/>
      </outputProperties>
      <info name="modelName">dnn</info>
      <info name="modelVersion">1</info>
    </model>
  </extension>

  <extension point="models" target="org.nuxeo.ai.model.serving.ModelServing">
    <model id="failingModel">
      <filter primaryType="Note"/>
      <config name="uri">http://localhost:5089/v1/models/fail_testing/</config>
      <inputProperties>
        <property name="dc:description" type="txt"/>
      </inputProperties>
      <outputProperties>
        <property name="dc:title" type="txt"/>
      </outputProperties>
      <info name="modelName">dnn</info>
      <info name="modelVersion">1</info>
    </model>
  </extension>

</component>
