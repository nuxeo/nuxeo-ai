name: CI for PR
on:
  pull_request:
    branches: [master, master-10.10]

jobs:
  build-and-test:
    uses: ./.github/workflows/build_and_test.yml
    with:
      aws-account: 762822024843
      aws-region: eu-west-1
    secrets:
      aws-access-key-id: ${{secrets.SVC_INFRASTRUCTURE_ADMIN_AWS_ACCESS_KEY_ID}}
      aws-secret-access-key: ${{secrets.SVC_INFRASTRUCTURE_ADMIN_AWS_SECRET_ACCESS_KEY}}
      packages-auth-user: ${{secrets.PACKAGES_AUTH_USER}}
      packages-auth-token: ${{secrets.PACKAGES_AUTH_TOKEN}}
      connect-auth-user: ${{secrets.CONNECT_AUTH_USER}}
      connect-auth-token: ${{secrets.CONNECT_AUTH_TOKEN}}